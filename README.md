# Онлайн конструтор для металлоконструкций 

Веб-приложение предоставляет каталог доступных чертежей ворот различных конструкций. Каждый чертеж имеет два ключевых 
параметра: ширину и высоту проема, в который будет установлено изделие. Менеджер вводит необходимые размеры, после 
чего программа автоматически масштабирует чертеж, пропорционально изменяя его и рассчитывая остальные параметры. 
Дополнительно можно выбрать такие характеристики, как: цвет конструкции, сечение конструкционных труб, тип замка и т.п.
Эти параметры также учитываются при формировании итогового чертежа. После настройки всех параметров менеджер может 
скачать стандартизированный PDF-файл, оформленный в фирменном стиле компании.

### Преимущества решения

- Ускоряет процесс подготовки коммерческих предложений

- Позволяет предоставить клиенту сразу несколько вариантов

- Гарантирует единый формат заявок

### Планы по развитию

- Добавление расчета стоимости изделия на основе введенных параметров

- Реализация системы аутентификации и управления пользователями

- Перенос фронтенда на React

## Архитектура

Приложение представляет собой синхронную микросервисную систему, развернутую в Docker. Все микросервисы взаимодействуют внутри изолированной Docker-сети и не имеют внешних портов. Для маршрутизации запросов используется шлюз (гейтвей), который является единственной точкой входа.

### Взаимодействие микросервисов

1. Клиент отправляет HTTP-запрос на гейтвей.
2. Гейтвей перенаправляет запрос в нужный микросервис.
3. Целевой микросервис обрабатывает данные и возвращает результат.
4. Гейтвей отправляет ответ клиенту. 

### Описание микросервисов

#### Гейтвей (**Gateway**)
Гейтвей является единственным компонентом системы, имеющим внешний порт. Его основная задача – маршрутизация запросов от
клиента к соответствующим микросервисам без анализа или модификации передаваемых данных. Он выполняет роль прокси-сервера, 
обеспечивая защиту внутренней архитектуры и исключая необходимость открытия портов для каждого отдельного сервиса.

#### Модель (**Model**)
Этот микросервис отвечает за расчеты параметров изделий. Он содержит базовый класс с методами вычислений, а каждое 
изделие представлено отдельным классом-наследником. Выбор обработчика реализован через рефлексию, где ID изделия 
сопоставляется с именем класса, после чего соответствующий класс загружается и выполняет расчеты.

#### Генератор PDF (**PDF**)
Микросервис предназначен для формирования итогового PDF-документа с параметрами изделия. Он использует библиотеку Apache
PDFBox и реализован аналогично сервису Model – с базовым классом, содержащим методы для генерации PDF, и системой 
классов-наследников, выбираемых через рефлексию. В архитектуре предусмотрены шаблонные блоки, такие как таблицы, 
заголовки и рамки с подписями, что позволяет гибко формировать документы в едином стиле.

#### Фронтенд (**Front**)
Фронтенд реализован с использованием HTML, CSS и JavaScript. Статические файлы хранятся внутри сервера и доступны через маршрутизацию. 
Структура фронтенда построена так, чтобы минимизировать зависимость от серверной логики и обеспечить простоту развертывания.

## Развертывание приложения
Исходный код загружается на VPS из основной ветки (main), после чего выполняется сборка всего проекта c помощью maven. 
В результате в каждом модуле проекта формируется .jar-файл в папке target/, который затем используется для запуска контейнеров. 

Чтобы избежать ручного обновления контейнеров после каждой сборки, в docker-compose.yml настроен механизм автоматического 
перезапуска (watch). Он отслеживает изменения .jar-файлов и при их обновлении выполняет перезапуск соответствующих 
сервисов без остановки всей системы.

Все переменные окружения загружаются из .env, обеспечивая гибкость конфигурации. Такая архитектура позволяет быстро 
обновлять приложение, сохраняя его работоспособность.